PROJECT: mitm.life — Man-in-the-Middle Intelligence (OSINT/Red Team blog)

GOAL
Build a fast, privacy-first static blog with two monetization surfaces: productized OSINT services (/services) and an affiliate tool hub (/tools). Deploy to Cloudflare Pages.

TECH BASELINE
- Next.js (App Router, static export) + MDX + Contentlayer
- TailwindCSS + shadcn/ui
- Pagefind for static search
- Shiki code highlight with copy and line focus
- @vercel/og for social images
- Analytics: Plausible or Umami (optional via ENV)
- Comments: Giscus (off by default)
- Feeds: RSS, Atom, JSON + sitemap.xml + robots.txt

CONTENT MODEL
- /content/posts/*.mdx
  - frontmatter: title, slug, date, updated, author, summary, tags[], category, cover, canonicalUrl, readingTime, draft, sources[], disclaimers[], series, ogImageOverride
- /content/pages/*.mdx → About, Disclosures, Contact
- Taxonomy pages: /tags/[tag], /categories/[category]
- Authors at /content/authors/*.yml
- Monetization data:
  - /data/services.yml → { id, name, summary, deliverables[], sla, price, priceId, buttonLabel }
  - /data/tools.yml → { slug, name, summary, tags[], vendor, affiliateUrl }

UX
- Dark theme default with toggle
- Post layout: title, meta, TOC, reading time, footnotes, tag links, prev/next
- MDX shortcodes: <Callout type="note|warn|legal">, <YouTube id="...">, <Mermaid code="...">, <Figure src alt caption>, <Source name url>
- Keyboard “/” focuses search
- Global nav: Home, Research, Tools, Guides, Notes, Services, About
- Footer: disclaimer, license toggle, social links
- Headings with anchor links

PAGES
- /                    → latest posts, featured grid, search
- /research            → long-form analyses (category filter)
- /guides              → how-tos and playbooks
- /notes               → short field notes
- /tools               → affiliate hub, YAML-driven cards, tag filter
- /services            → productized OSINT tiers, pricing and checkout
- /go/[slug]           → cloaked affiliate redirects
- /about, /disclosures, /contact
- /feeds/rss.xml, /feeds/atom.xml, /feeds/feed.json

MONETIZATION

/services (productized OSINT)
- Tiers in services.yml:
  - Basic Exposure Scan
  - Targeted OSINT Dossier
  - Custom Intelligence
- Components:
  - <PricingTable items={services} />
  - <CheckoutButton provider="stripe|lemonsqueezy" priceId="..." label="..." />
  - <LegalDisclosure kind="osint" />
- Behavior:
  - Hosted checkout only
  - On successful checkout, client posts {serviceId, sessionId, email} to process.env.N8N_WEBHOOK_URL
  - Show SLA, deliverables, turnaround, and refund policy per tier
  - Optional “Request SOW” link opens mailto or contact page

/tools (affiliate hub)
- Data from tools.yml
- Grid of <AffiliateCard> with name, summary, tags, vendor
- Cloaked redirects at /go/[slug] reading tools.yml and 302 → affiliateUrl
- /go/* set to noindex and excluded from Pagefind
- Auto-append UTM from config.affiliates; outbound click event sent to analytics
- Tag filter and search on page

ROUTING AND GUARDS
- /go/[slug]: if slug not found, 404
- Add simple HMAC or checksum support for /go logging param if config.affiliates.hardened is true
- /services uses test mode when NEXT_PUBLIC_PAYMENTS_TEST_MODE=true

PERFORMANCE, SEO, SECURITY
- Static export only
- next-safe for CSP and security headers
- Structured data: Article, BreadcrumbList, WebSite SearchAction
- Lazy load images and iframes
- No third-party fonts

CONFIG (/site.config.ts)
- site: { name, description, url }
- nav: [...], social: {...}
- analytics: { provider: "plausible"|"umami", domain|id }
- payments: { provider: "stripe"|"lemonsqueezy", priceIds: { basic, dossier, custom } }
- intake: { n8nWebhook: process.env.N8N_WEBHOOK_URL }
- affiliates: { cloakedPrefix: "/go", utmSource: "mitm.life", hardened: false }
- license: { code: "MIT", content: "CC BY-SA 4.0" }

ENV (.env.example)
- SITE_URL=
- NEXT_PUBLIC_ANALYTICS_PROVIDER=
- PLAUSIBLE_DOMAIN= or UMAMI_WEBSITE_ID=
- PAYMENTS_PROVIDER=
- STRIPE_PRICE_BASIC=, STRIPE_PRICE_DOSSIER=, STRIPE_PRICE_CUSTOM=
- LEMONSQUEEZY_STORE_ID=, LEMONSQUEEZY_VARIANT_IDS=...
- N8N_WEBHOOK_URL=

DEV QUALITY
- TypeScript strict, ESLint, Prettier
- pnpm scripts: dev, build, export, start, lint, typecheck, feeds:generate, new:post "Title" --slug
- GitHub Actions: typecheck, build, export, pagefind index, deploy to Cloudflare Pages

DELIVERABLES
- Next.js app “mitm-life-blog”
- Contentlayer schema for posts and pages
- /data/services.yml and /data/tools.yml with examples
- Components: PricingTable, CheckoutButton, AffiliateCard, GoRedirect, LegalDisclosure
- OG image template
- Cloudflare Pages config and README

STYLE
- Minimal dark UI, high contrast, generous spacing, rounded-2xl cards, subtle hovers
- System font stack, monospace accents for technical terms
- Accessible color contrast

ACCEPTANCE
- Lighthouse 95+ across Perf, SEO, Best Practices, Accessibility on seeded build
- /services renders tiers from services.yml and shows three working test checkout buttons
- Successful checkout triggers 200 from N8N_WEBHOOK_URL in test harness
- /tools lists items from tools.yml; clicking card goes to /go/[slug] then 302 to affiliateUrl
- /go/* is noindex and absent from Pagefind results
- Feeds and sitemap validate; search returns seeded posts

SEED DATA (examples, non-binding)
/data/services.yml
- id: basic
  name: Basic Exposure Scan
  summary: External footprint scan and quick risk brief
  deliverables: ["Domain and subdomain map", "Leaky endpoints", "Top findings"]
  sla: 3 business days
  price: 199
  priceId: STRIPE_PRICE_BASIC
  buttonLabel: "Start scan"
- id: dossier
  name: Targeted OSINT Dossier
  summary: Deep profile with sources and corroboration
  deliverables: ["Attribution matrix", "Source pack", "Risk scenarios"]
  sla: 7 business days
  price: 1499
  priceId: STRIPE_PRICE_DOSSIER
  buttonLabel: "Order dossier"

/data/tools.yml
- slug: shodan
  name: Shodan
  summary: Internet-wide scan engine for exposed services
  tags: ["recon","attack-surface"]
  vendor: Shodan
  affiliateUrl: https://example.com/aff/shodan
- slug: maltego
  name: Maltego
  summary: Graph-based link analysis
  tags: ["link-analysis","osint"]
  vendor: Maltego
  affiliateUrl: https://example.com/aff/maltego

Name the project “mitm-life-blog”. Generate now.